CREATE TABLE IF NOT EXISTS USERS (
  user_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  user_name VARCHAR(255) NOT NULL,
  user_email VARCHAR(512) NOT NULL,
  CONSTRAINT UQ_USER_EMAIL UNIQUE (user_email)
);

CREATE TABLE IF NOT EXISTS ITEMREQUEST (
request_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
request_description VARCHAR(255) NOT NULL,
request_created timestamp NOT NULL,
user_id BIGINT NOT NULL REFERENCES USERS(USER_ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS ITEMS (
 item_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
 item_name VARCHAR(255) NOT NULL,
 item_description VARCHAR(255) NOT NULL,
 item_available BOOL NOT NULL,
 user_id BIGINT NOT NULL REFERENCES USERS(USER_ID) ON DELETE CASCADE,
 request_id BIGINT REFERENCES ITEMREQUEST (request_id)
);

CREATE TABLE IF NOT EXISTS bookings (
booking_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
booking_start timestamp NOT NULL,
booking_end timestamp NOT NULL,
item_id BIGINT NOT NULL REFERENCES ITEMS(item_id) ON DELETE CASCADE,
user_id BIGINT NOT NULL REFERENCES USERS(USER_ID) ON DELETE CASCADE,
booking_status VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS comment (
comment_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
comment_text VARCHAR(255) NOT NULL,
item_id BIGINT NOT NULL REFERENCES ITEMS(item_id) ON DELETE CASCADE,
user_id BIGINT NOT NULL REFERENCES USERS(USER_ID) ON DELETE CASCADE,
comment_created timestamp NOT NULL
);



